<!DOCTYPE html>
<html lang="en">
<head>
	<title>Upvote</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link href="https://fonts.googleapis.com/css?family=Oswald|Coiny" rel="stylesheet">

</head>
<body>
	<div class="topnav" style="height: 135px; ">
				<span class="login100-form-logo" style="position: absolute; top: 8px; left: 30%">
					<!-- <i class="zmdi zmdi-landscape"></i> -->
					<img src="images/icons/humanity.png" alt="logo" style=" width: 90px; height: 90px;">
				</span>
				<span class="login100-form-title p-b-30 p-t-40" style="font-size: 50px;position: absolute; top: 7px; left: 38%;font-family:Coiny;"> SelfieLess Acts </span>
	</div>

	<div class="limiter">
		<div class="container-login100" style="background-image: url('images/bg-03.jpg');">
			<div class="wrap-login100">
				<div class="login100-form validate-form">
					<span class="login100-form-logo">
						<!-- <i class="zmdi zmdi-landscape"></i> -->
						<img src="images/icons/humanity.png" alt="logo" style="width: 95px; height: 95px;">
					</span>

					<span class="login100-form-title p-b-34 p-t-27">
						Vote an Act
					</span>

					<div class="wrap-input100 validate-input" >
						<input class="input100" type="text" name="act" placeholder="Act ID" id="id">
					</div>

					<div class="container-login100-form-btn">
						<button class="login100-form-btn" onclick="fun()">
							Upvote
						</button>
					</div>

				</div>
			</div>
		</div>
	</div>



<script>
	function fun()
	  {
	    var id = Number(document.getElementById("id").value);
	    var cur_url = document.URL;
	    var arr = cur_url.split("?");
	    var cat = arr[1];
	    if(id == "")
	    {
	      alert("ID is empty");
	      location.replace(upvote.html);
	    }
	    req = new XMLHttpRequest();
	    var url = "http://127.0.0.1:5000/api/v1/acts/upvote";
	    req.open("POST", url, true);
	    req.setRequestHeader("Content-type", "application/json");
	    var data = JSON.stringify([id]);
	    req.send(data);
	    req.onload = function()
	    {
	      if(req.status == 200)
	      {
	        alert("Upvoted");
	        location.replace("act.html?"+cat);
	      }
	      else if(req.status == 405)
	      {
	        alert("Invalid ActID");
	        location.replace("upvote.html?"+cat);
	      }
	    }

	  }
</script>

</body>
</html>
